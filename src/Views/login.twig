{% extends 'base.twig' %}
{% block content %}

<!-- Page Header-->
<header class="masthead" style="background-image: url('/assets/img/post-bg.jpg')">
    <div class="container position-relative px-4 px-lg-5">
        <div class="row gx-4 gx-lg-5 justify-content-center">
            <div class="col-md-10 col-lg-8 col-xl-7">
                <div class="site-heading">
                    <h1>
                        {{title}}
                    </h1>
                </div>
            </div>
        </div>
    </div>
</header>

<main class="mb-4">
<div class="container px-4 px-lg-5">
<div class="row gx-4 gx-lg-5 justify-content-center">
<div class="col-md-10 col-lg-8 col-xl-7">

    {% if error_message is defined %}

        <div class="alert alert-danger" role="alert">
            {{ error_message }}
        </div> 

    {% endif %}

    {% if session_username is defined %}

        <form action="logout" method="post">
            <input class="form-control btn btn-danger" type="submit" value="Se dÃ©connecter" />
        </form>
        
    {% else %}
        <!-- Login/Signup Form -->
        <form id="loginForm" action="login" method="post" data-sb-form-api-token="">
            <div class="form-floating">
                <input class="form-control" id="email" name="email" type="email" placeholder="Votre email" data-sb-validations="required,email" />
                <label for="email">Email</label>
                <div class="invalid-feedback" data-sb-feedback="email:required">Veuillez renseigner votre email.</div>
                <div class="invalid-feedback" data-sb-feedback="email:email">Le format de l'email est invalide.</div>
            </div>
            <div class="form-floating">
                <input class="form-control" id="password" name="password" placeholder="Votre mot de passe" type="password" data-sb-validations="required" />
                <label for="password">Mot de passe</label>
                <div class="invalid-feedback" data-sb-feedback="password:required">Veuillez renseigner votre mot de passe.</div>
            </div>

            <br />
            <!-- 
                Bootstrap small hack to keep the form 'invalid feedbacks'.
                Those 2 divs and a button with id submitButton must be present. 
                Hide the button and put our own instead. 
            -->
            <div class="d-none" id="submitSuccessMessage"></div>
            <div class="d-none" id="submitErrorMessage"></div>
            <button class="d-none" id="submitButton" type="submit"></button>
            <input type="submit" class="btn btn-primary text-uppercase" value='Se connecter'>
        </form>
    {% endif %}

</div>
</div>
</div>
</main>


<script src="js/sb-forms.min.js"></script>
{% endblock %}